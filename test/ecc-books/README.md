# Test run with the ECC Books dataset

Canonical URL of the dataset: <http://semantics.gr/authorities/vocabularies/ecc-books-dataset>

This dataset consists of the complete data including a dataset description.

## Downloading the dataset using the crawler tool

```bash
docker-compose run --rm --user 1000:1000 crawl starter.sh  \
   --dataset-uri http://semantics.gr/authorities/vocabularies/ecc-books-dataset \
   --output ecc-books.nt
```

## Validating the dataset description

Before processing the complete data we validated the dataset description. We used a SHACL shape file defined for datasets with URI lists using the VOID ontology:  

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books.nt \
  --shape shacl_dataset_list_void.ttl \
  --output ecc-books-val-ds.ttl
```

The validation was succesful, see the ecc-books-val-ds.ttl report.

## Mapping the schema.org data to EDM data

Next step was doing the actual conversion of the resources.

```bash
docker-compose run --rm --user 1000:1000 map starter.sh \
  --data ecc-books.nt \
  --query schema2edm.rq \
  --format RDF/XML \
  --output ecc-books-edm.rdf
```

Note: in `.env` VAR_PROVIDER was set to 'ECC'.

## Validate the total the EDM data

Next the generated EDM data was validated.

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books-edm.rdf \
  --shape shacl_edm.ttl \
  --output ecc-books-edm-val.ttl
```

This results in a list of violations because in the dc:language tag is missing which is required for edm:TEXT types, see the ecc-books-edm-val.ttl report for more info.

Note: Some of the SHACL messages are still very unclear, it needs some debugging to find the cause of the error. This needs some improvement.

We fixed this in the mapping query by adding the `dc:language "el"` explictly to the query. See `ecc-books2edm.rq` in the `ecc-books` test dir.

## Zip the result for transport to Europena

```bash
# note the ./data in this command!
gzip ./data/ecc-books-edm.rdf
```

The result file will be created in the `data` dir and is called `ecc-books-edm.rdf.gz`

All the files generated by this test run are stored in the `test` dir under `ecc-books` for documentation purposes.
