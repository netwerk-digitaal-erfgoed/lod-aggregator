# Test run with the ECC Books dataset

Canonical URL of the dataset: <http://semantics.gr/authorities/vocabularies/ecc-books-dataset>

This dataset consists of the complete data including a dataset description. The dataset description uses the void:rootResource property to point to all the resources.

## Download the dataset

```bash
crawl.sh --dataset-uri http://semantics.gr/authorities/vocabularies/ecc-books-dataset --output ecc-books.nt
```

## Validate the dataset description

Before processing the complete data we validated the dataset description. We used a SHACL shape file defined for datasets with URI lists using the VOID ontology:  

```bash
  validate.sh --data ecc-books.nt --shape shacl_dataset_list_void.ttl
```

According to `errors.txt` the validation was succesful.

## Map the schema.org data to EDM data

Next step was doing the actual conversion of the resources.

```bash
map.sh --data ecc-books.nt --output ecc-books-edm.rdf
```

Note: in `.env` `VAR_PROVIDER` was set to 'EKT' to set the `edm:provider` property in this query.

## Validate the EDM data

Next the generated EDM data was validated.

```bash
validate.sh --data ecc-books-edm.rdf
```

This results in a list of violations in `errors.txt` because in the dc:language tag is missing which is required for edm:TEXT types, see the ecc-books-edm-val.ttl report for more info.

Note: The errors in `errors.txt` are not very informative, it needed some debugging to find the cause of the problems. This needs some improvement but my SHACL knowledge is still too limited to handle this gracefully.

I fixed this in the mapping query by adding the `dc:language "el"` explictly to the query. See `ecc-books2edm.rq` in the `ecc-books` test dir.

## Prepare for delivery to Europeana

```bash
convert.sh --data ecc-books-edm.rdf --output ecc-books-edm.zip
```

The files generated by this test run are stored under `ecc-books` for documentation purposes.
